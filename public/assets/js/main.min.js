$(document).ready(function() {
    "use strict";
    $("#sidebar-toggle").on("click", function() {
        $("body").toggleClass("sidebar-hidden")
    }), feather.replace(),
        function() {
            if (!$(".page-sidebar").length) return;
            var e = $(".accordion-menu li:not(.open) ul"),
                o = $(".accordion-menu li.active-page > a");
            e.hide();
            const n = document.querySelector(".page-sidebar"),
                t = new PerfectScrollbar(n);
            $(".accordion-menu li a").on("click", function(e) {
                var o = $(this).next("ul"),
                    n = $(this).parent("li"),
                    a = $(".accordion-menu > li.open");
                if (o.length) return n.hasClass("open") ? (o.slideUp(200), n.removeClass("open"), t.update()) : (a.length && ($(".accordion-menu > li.open > ul").slideUp(200), a.removeClass("open"), t.update()), o.slideDown(200), n.addClass("open"), t.update()), !1
            }), $(".active-page > ul").length && o.click()
        }(),
        function() {
            $('[data-bs-toggle="popover"]').popover(), $('[data-bs-toggle="tooltip"]').tooltip();
            var e = document.querySelectorAll(".needs-validation");
            Array.prototype.slice.call(e).forEach(function(e) {
                e.addEventListener("submit", function(o) {
                    e.checkValidity() || (o.preventDefault(), o.stopPropagation()), e.classList.add("was-validated")
                }, !1)
            })
        }()
}), $(window).on("load", function() {
    setTimeout(function() {
        $("body").addClass("no-loader")
    }, 1e3)
});

function checkDate(){

    var d1 = document.getElementById('startDate').value;
    var d2 = document.getElementById('endDate').value;

    var startDate = new Date(d1);
    var endDate = new Date(d2);

    if(startDate.getTime() <= endDate.getTime()){
        document.getElementById('frmFiltre').submit();
    }else{
        // document.getElementById('errorFiltre').innerHTML = "<div class='row'><div class='col-12 col-sm-12'><div class='alert alert-danger fade show alert-dismissable'><button type='button' class='close' data-dismiss='alert' aria-hidden='true'>×</button><span>La date de début ne doit pas être supérieure à la date de fin</span></div></div></div><br/>";
        document.getElementById('errorFiltre').innerHTML ="<div class='row'><div class='col-12 col-sm-12'><div class='alert alert-danger alert-dismissible'><button type='button' class='close' data-bs-dismiss='alert' aria-label='Close' title='Close'>x</button><span><h6><i class='icon fa fa-ban'></i> La date de début ne doit pas être supérieure à la date de fin </h6></span></div></div></div></div>";
    }
}


function validatePasswordMatch() {
    const password = document.getElementById("newpassword").value;
    const confirmation = document.getElementById("confirmation").value;
    const errorDiv = document.getElementById("password-error");

    // Règles de complexité du mot de passe
    const regexUpper = /[A-Z]/;
    const regexLower = /[a-z]/;
    const regexDigit = /[0-9]/;
    const regexSpecial = /[^A-Za-z0-9]/;

    if (password !== confirmation) {
        errorDiv.textContent = "Les mots de passe ne correspondent pas.";
        return false;
    }

    if (password.length < 12) {
        errorDiv.textContent = "Le mot de passe doit contenir au moins 12 caractères.";
        return false;
    }

    if (!regexUpper.test(password)) {
        errorDiv.textContent = "Le mot de passe doit contenir au moins une lettre majuscule.";
        return false;
    }

    if (!regexLower.test(password)) {
        errorDiv.textContent = "Le mot de passe doit contenir au moins une lettre minuscule.";
        return false;
    }

    if (!regexDigit.test(password)) {
        errorDiv.textContent = "Le mot de passe doit contenir au moins un chiffre.";
        return false;
    }

    if (!regexSpecial.test(password)) {
        errorDiv.textContent = "Le mot de passe doit contenir au moins un caractère spécial.";
        return false;
    }

    errorDiv.textContent = ""; // Aucun problème
    return true;
}

